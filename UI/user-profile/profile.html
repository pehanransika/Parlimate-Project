<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Profile | Parlimate</title>
		<link rel="stylesheet" href="../index/sidebar1.css" />
		<link rel="stylesheet" href="../index/header/header.css" />
		<link rel="stylesheet" href="../index.css" />
		<link rel="stylesheet" href="./profile.css" />
		<!-- icons -->
		<link
			rel="stylesheet"
			href="https://site-assets.fontawesome.com/releases/v6.6.0/css/all.css"
		/>
		<style>
			body {
				background: #f0f0f0;
				padding: 2rem;
			}

			.f-col {
				display: flex;
				flex-direction: column;
			}

			.f-row {
				display: flex;
				align-items: center;
			}
			.post-card {
				width: 100%;
			}
			.post-container {
				width: 100%;
			}
		</style>

		<script src="./profile.js" defer></script>
		<script src="./prefModal.js" defer></script>
	</head>
	<body>
		<div class="container">
			<div id="interestsModal" class="modal">
				<div class="modal-content">
					<div class="top f-row caps">
						<div class="title">Political interests</div>
						<div class="close-btn f-row">
							<i class="fa-solid fa-xmark"></i>
						</div>
					</div>
					<div class="center f-col">
						<div class="desc">
							These are the political topics and parties this
							person has shown interest on Parlimate. This might
							reflects their personal views and helps connect them
							with relevant discussions and representatives
						</div>
						<div class="politicians-pref table-cont f-col">
							<div class="title f-row">
								<i class="fa-solid fa-user-tie"></i>
								<span>Top Supported Leaders</span>
							</div>
							<table>
								<thead class="caps">
									<tr>
										<td>preference rank</td>
										<td>politician name</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>#1</td>
										<td
											data-options="test1,test2,test3,Ms. Anjali Karunaratne"
										>
											Ms. Anjali Karunaratne
										</td>
									</tr>
									<tr>
										<td>#2</td>
										<td
											data-options="test1,test2,test3,Ms. Dr. Niroshan Wijegunawardena"
										>
											Dr. Niroshan Wijegunawardena
										</td>
									</tr>
									<tr>
										<td>#3</td>
										<td
											data-options="test1,test2,test3, Maj. Gen. (Retd.) Sarath Bandara"
										>
											Maj. Gen. (Retd.) Sarath Bandara
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="party-pref table-cont f-col">
							<div class="title f-row">
								<i class="fa-solid fa-landmark"></i>
								<span>Preferred Political Parties</span>
							</div>
							<table>
								<thead class="caps">
									<tr>
										<td>preference rank</td>
										<td>political party name</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>#1</td>
										<td
											data-options="test1,test2,test3,United Progressive Front (UPF)"
										>
											United Progressive Front (UPF)
										</td>
									</tr>
									<tr>
										<td>#2</td>
										<td
											data-options="test1,test2,test3,Ms. People's Power Alliance (PPA)"
										>
											People's Power Alliance (PPA)
										</td>
									</tr>
									<tr>
										<td>#3</td>
										<td
											data-options="test1,test2,test3,National Unity Party (NUP)"
										>
											National Unity Party (NUP)
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="footer f-row caps">
						<div class="edit f-row">
							<button id="pref-edit" class="edit-btn f-row">
								<i class="fa-solid fa-pen-to-square"></i>
								Edit
							</button>
						</div>
						<div class="action f-row">
							<button class="pref-cancel">Cancel</button>
							<button id="pref-save" class="save-btn">
								save
							</button>
						</div>
					</div>
				</div>
			</div>
			<div id="editModal" class="modal">
				<div class="modal-content f-col">
					<div class="top f-row caps">
						<div class="title">Account settings</div>
						<div class="close-btn f-row">
							<i class="fa-solid fa-xmark"></i>
						</div>
					</div>
					<div class="center f-row">
						<div class="details f-col">
							<div class="info f-col">
								<div class="title">User information</div>
								<div class="desc">
									Here you can edit public information about
									yourself. The changes will be displayed for
									other users as well.
								</div>
							</div>
							<div class="inputs f-col">
								<div class="email f-col">
									<label for="email-input" class="input-head"
										>Email address</label
									>
									<input
										type="email"
										name="email"
										id="email-input"
										placeholder="john.doe@example.com"
										disabled
									/>
								</div>
								<div class="full-name">
									<label for="name-input" class="input-head"
										>full name</label
									>
									<span> user123 </span>
									<input
										type="text"
										name="full-name"
										id="name-input"
										placeholder="John Doe"
									/>
								</div>
								<div class="city">
									<label
										for="province-drop"
										class="input-head"
										>location</label
									>
									<div class="dropdown f-row">
										<select
											name="province"
											id="province-drop"
											onchange="updateCities()"
										>
											<option value="" disabled selected>
												-- Select Province --
											</option>
											<option value="western">
												Western Province
											</option>
											<option value="central">
												Central Province
											</option>
											<option value="southern">
												Southern Province
											</option>
											<option value="northern">
												Northern Province
											</option>
											<option value="eastern">
												Eastern Province
											</option>
											<option value="north-western">
												North Western Province
											</option>
											<option value="north-central">
												North Central Province
											</option>
											<option value="uva">
												Uva Province
											</option>
											<option value="sabaragamuwa">
												Sabaragamuwa Province
											</option>
										</select>
										<select id="city" name="city" disabled>
											<option value="">
												-- First select a province --
											</option>
										</select>
									</div>
								</div>
							</div>
						</div>
						<div class="profile-pic f-col">
							<div class="banner">
								<img src="./bg.jpg" alt="banner" />
							</div>
							<div class="profile f-col">
								<div class="image"></div>
								<div class="btns f-row">
									<button id="change-pp">
										Change profile
									</button>
									<button id="change-banner">
										Change banner
									</button>
								</div>
							</div>
						</div>
					</div>
					<div class="footer f-row">
						<div class="change-pw">
							<a href="#" target="_blank">change password</a>
						</div>
						<div class="action f-row">
							<button id="cancel-btn">cancel</button>
							<button id="save-btn">save</button>
						</div>
					</div>
				</div>
			</div>
			<div class="profile-container f-col">
				<div class="profile-imgs">
					<div class="cover-photo">
						<img src="bg.jpg" alt="bg" />
					</div>
					<div class="profile-photo">
						<img src="https://i.pravatar.cc/200" alt="" srcset="" />
					</div>
				</div>
				<div class="profile-details f-col">
					<div class="user-basic f-row">
						<div class="name">John Doe</div>
						<span class="dot">·</span>
						<div class="joined-date">
							Joined on <span class="date">January 15, 2023</span>
						</div>
						<span class="dot">·</span>
						<div class="role caps">Member</div>
					</div>
					<div class="profession">Product Designer at Senica</div>
					<div class="city caps">
						Galle, Southern Province &#127473;&#127472;
					</div>
					<div class="buttons f-row">
						<div class="prmry-btns f-row">
							<button class="follow-btn">
								<i class="fa-solid fa-plus"></i>follow
							</button>
							<button class="message-btn">
								<i class="fa-solid fa-messages"></i>message
							</button>
						</div>
						<div class="scndry-btns">
							<button class="edit-btn">
								<i class="fa-solid fa-pen-to-square"></i>edit
							</button>
						</div>
					</div>
				</div>
			</div>
			<div class="recent-posts f-col">
				<div class="title caps f-col">
					<span>recent posts</span>
					<span class="desc">recently added posts and insights.</span>
				</div>
				<div
					class="post-container"
					id="posts-container"
					data-user-id="user123"
				>
					<div class="post-card">
						<div class="post-header">
							<img
								src="https://i.pravatar.cc/50"
								alt="User Avatar"
								class="post-avatar"
							/>
							<div class="post-user-info">
								<h4 class="username">John Doe</h4>
								<span class="post-time">2 hours ago</span>
							</div>
							<div class="post-actions">
								<button class="post-menu-btn">
									<i class="fas fa-ellipsis-v"></i>
								</button>
							</div>
						</div>

						<div class="post-content">
							<p>
								Just attended the parliamentary debate on the
								new education reforms. While the proposal has
								good intentions, we need stronger provisions for
								rural school infrastructure. What are your
								thoughts? #EducationReform #SriLanka
							</p>

							<div class="post-image">
								<img
									src="debate-photo.jpg"
									alt="Parliament debate"
								/>
							</div>

							<div class="post-tags">
								<span class="tag">#EducationReform</span>
								<span class="tag">#RuralDevelopment</span>
								<span class="tag">#SriLanka</span>
							</div>
						</div>

						<div class="post-footer">
							<button class="action-btn like-btn">
								<i class="fa-regular fa-thumbs-up"></i>
								<span>124</span>
							</button>
							<button class="action-btn comment-btn">
								<i class="far fa-comment"></i> <span>28</span>
							</button>
							<button class="action-btn share-btn">
								<i class="fas fa-share"></i> <span>Share</span>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- <script>
			// profile.js
			document.addEventListener("DOMContentLoaded", function () {
				// Get all necessary elements
				const followBtn = document.querySelector(".follow-btn");
				const profileEditBtn = document.querySelector(
					".scndry-btns .edit-btn"
				);
				const interestsModal =
					document.getElementById("interestsModal");
				const editModal = document.getElementById("editModal");
				const closeBtns = document.querySelectorAll(".close-btn");
				const modalCancelBtns =
					document.querySelectorAll(".cancel-btn");

				// Initially hide both modals
				interestsModal.style.display = "none";
				editModal.style.display = "none";

				// Open interests modal when follow button is clicked
				followBtn.addEventListener("click", (e) => {
					e.preventDefault();
					interestsModal.style.display = "flex";
				});

				// Open edit modal when profile edit button is clicked
				profileEditBtn.addEventListener("click", (e) => {
					e.preventDefault();
					editModal.style.display = "flex";
				});

				// Close modals when close buttons are clicked
				closeBtns.forEach((btn) => {
					btn.addEventListener("click", () => {
						interestsModal.style.display = "none";
						editModal.style.display = "none";
					});
				});

				// Close modals when cancel buttons are clicked
				modalCancelBtns.forEach((btn) => {
					btn.addEventListener("click", () => {
						interestsModal.style.display = "none";
						editModal.style.display = "none";
					});
				});

				// Close modals when clicking outside the modal content
				window.addEventListener("click", (event) => {
					if (
						event.target === interestsModal ||
						event.target === editModal
					) {
						interestsModal.style.display = "none";
						editModal.style.display = "none";
					}
				});

				// Table editing functionality for political interests modal
				const prefEditBtn = document.getElementById("pref-edit");
				const prefSaveBtn = document.getElementById("pref-save");

				let originalValues = [];

				prefEditBtn.addEventListener("click", function () {
					// Hide edit button and show save/cancel buttons
					prefEditBtn.style.display = "none";
					document.querySelector(".action").style.display = "flex";

					// Save original values
					originalValues = [];
					const tables =
						document.querySelectorAll(".table-cont table");

					tables.forEach((table) => {
						const tableData = [];
						const rows = table.querySelectorAll("tbody tr");

						rows.forEach((row) => {
							// Only get the second td (index 1) in each row
							const cell = row.querySelector("td:nth-child(2)");
							tableData.push({
								value: cell.textContent,
								options: cell.getAttribute("data-options"),
							});
						});

						originalValues.push(tableData);
					});

					// Convert all second tds to dropdowns
					convertCellsToDropdowns();
				});

				prefSaveBtn.addEventListener("click", function () {
					// Show edit button and hide save/cancel buttons
					prefEditBtn.style.display = "flex";
					document.querySelector(".action").style.display = "none";

					// Convert all dropdowns back to text
					convertDropdownsToCells();

					// Here you could add code to save the data to a server
					console.log("Data saved:", getCurrentValues());
				});

				function convertCellsToDropdowns() {
					const tables =
						document.querySelectorAll(".table-cont table");

					tables.forEach((table) => {
						const rows = table.querySelectorAll("tbody tr");

						rows.forEach((row) => {
							// Only target the second td (index 1) in each row
							const cell = row.querySelector("td:nth-child(2)");
							const currentValue = cell.textContent.trim();
							const options = cell
								.getAttribute("data-options")
								.split(",");

							let selectHtml = "<select>";
							options.forEach((option) => {
								const selected =
									option.trim() === currentValue
										? " selected"
										: "";
								selectHtml += `<option value="${option.trim()}"${selected}>${option.trim()}</option>`;
							});
							selectHtml += "</select>";

							cell.innerHTML = selectHtml;
						});
					});
				}

				function convertDropdownsToCells() {
					const tables =
						document.querySelectorAll(".table-cont table");

					tables.forEach((table) => {
						const rows = table.querySelectorAll("tbody tr");

						rows.forEach((row) => {
							const cell = row.querySelector("td:nth-child(2)");
							const select = cell.querySelector("select");

							if (select) {
								cell.textContent = select.value;
							}
						});
					});
				}

				function getCurrentValues() {
					const values = [];
					const tables =
						document.querySelectorAll(".table-cont table");

					tables.forEach((table) => {
						const tableData = [];
						const rows = table.querySelectorAll("tbody tr");

						rows.forEach((row) => {
							const cell = row.querySelector("td:nth-child(2)");
							tableData.push(cell.textContent);
						});

						values.push(tableData);
					});

					return values;
				}

				// Location dropdown functionality for edit modal
				const citiesByProvince = {
					western: [
						"Colombo",
						"Negombo",
						"Moratuwa",
						"Panadura",
						"Kalutara",
						"Gampaha",
						"Horana",
					],
					central: [
						"Kandy",
						"Matale",
						"Nuwara Eliya",
						"Gampola",
						"Dambulla",
						"Hatton",
					],
					southern: [
						"Galle",
						"Matara",
						"Hambantota",
						"Weligama",
						"Tangalle",
						"Ambalangoda",
					],
					northern: [
						"Jaffna",
						"Vavuniya",
						"Kilinochchi",
						"Mullaitivu",
						"Mannar",
					],
					eastern: [
						"Batticaloa",
						"Trincomalee",
						"Kalmunai",
						"Ampara",
						"Akkaraipattu",
					],
					"north-western": [
						"Kurunegala",
						"Puttalam",
						"Chilaw",
						"Narammala",
						"Wariyapola",
					],
					"north-central": [
						"Anuradhapura",
						"Polonnaruwa",
						"Medawachchiya",
						"Habarana",
						"Kekirawa",
					],
					uva: [
						"Badulla",
						"Monaragala",
						"Bandarawela",
						"Haputale",
						"Welimada",
					],
					sabaragamuwa: [
						"Ratnapura",
						"Kegalle",
						"Balangoda",
						"Embilipitiya",
						"Kuruwita",
					],
				};

				function updateCities() {
					const provinceSelect =
						document.getElementById("province-drop");
					const citySelect = document.getElementById("city");
					const selectedProvince = provinceSelect.value;

					// Clear previous options
					citySelect.innerHTML = "";

					if (selectedProvince) {
						citySelect.disabled = false;
						citySelect.add(new Option("-- Select City --", ""));

						// Add cities for selected province
						citiesByProvince[selectedProvince].forEach((city) => {
							citySelect.add(
								new Option(
									city,
									city.toLowerCase().replace(" ", "-")
								)
							);
						});
					} else {
						citySelect.disabled = true;
						citySelect.add(
							new Option("-- First select a province --", "")
						);
					}
				}

				// Initialize the city dropdown
				document
					.getElementById("province-drop")
					.addEventListener("change", updateCities);
			});
		</script> -->
	</body>
</html>
